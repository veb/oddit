{% comment %}
    TinyMCE requires you to have the resources referenced below installed under your STATIC_URL/tinymce.
    You can download them from tinymce.com, or include django-tinymce in your project.
{% endcomment %}
{% load wysiwyg %}{% load staticfiles %}
<script type="text/javascript" src="{% wysiwyg_static_url 'trumbowyg' 'trumbowyg/' DJANGO_WYSIWYG_MEDIA_URL %}trumbowyg.js"></script>
<script type="text/javascript">
    var django_wysiwyg_editor_configs = [];
    {% block django_wysiwyg_editor_config %}
        var django_wysiwyg_editor_config = {
          removeformatPasted: true,
          btns: [
              ['formatting'],
              'btnGrp-semantic',
              ['link'],
              'btnGrp-justify',
              'btnGrp-lists',
              ['horizontalRule'],
              ['removeformat'],
              ['fullscreen']
          ],
          autogrow: true,
          semantic: true,

        };
    {% endblock %}

    var django_wysiwyg = {
        editors: {},
        enable: function django_wysiwyg_enable(editor_name, field_id, config) {
            if (!config) {
                config = django_wysiwyg_editor_configs[field_id] || django_wysiwyg_editor_config;
            }
            if (!this.editors[editor_name]) {
                jQuery.fn.ready(function () {
                    django_wysiwyg.editors[editor_name] = jQuery("#" + field_id).trumbowyg(config).on('tbwblur', function (e) {
                        $(this).text($(this).trumbowyg('html'));
                        $("#post").validator('validate');
                    }).on('tbwchange', function (e) {
                        // $(this).text($(this).trumbowyg('html'));
                    })
                });
            }
        },
        disable: function django_wysiwyg_disable(editor_name) {
            var editor = this.editors[editor_name];
            if (editor) {
                editor.trumbowyg('destroy');
                this.editors[editor_name] = null;
            }
        },
        is_loaded: function django_wysiwyg_is_loaded() {
            return window.jQuery != null && window.jQuery.fn.trumbowyg != null;
        }
    }
</script>

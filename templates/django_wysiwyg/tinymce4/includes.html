{% comment %}
    TinyMCE requires you to have the resources referenced below installed under your STATIC_URL/tinymce.
    You can download them from tinymce.com, or include django-tinymce in your project.
{% endcomment %}
{% load wysiwyg %}{% load staticfiles %}
<script type="text/javascript" src="{% wysiwyg_static_url 'tinymce' 'tiny_mce/' DJANGO_WYSIWYG_MEDIA_URL %}tinymce.js"></script>
<script type="text/javascript" src="{% wysiwyg_static_url 'tinymce' 'tiny_mce/' DJANGO_WYSIWYG_MEDIA_URL %}jquery.tinymce.js"></script>
<script type="text/javascript">
    // allow custom settings per editor ID:
    var django_wysiwyg_editor_configs = [];{% block django_wysiwyg_editor_config %}
        var django_wysiwyg_editor_config = {
            relative_urls: false,
            theme: "modern",
            autoresize_max_height: 500,
            content_css: "{% static 'css/styles.css' %}",
            entity_encoding: 'raw',
            statusbar: false,
            menubar: false,
            plugins: "paste link code image imagetools preview table autoresize",
            style_formats: [
                {
                    title: 'Text',
                    block: 'p'
                }, {
                    title: 'Heading',
                    block: 'h2'
                }, {
                    title: 'Subheading',
                    block: 'h3'
                }
            ],
            image_class_list: [
                {
                    title: 'Default',
                    value: 'img-responsive img-thumbnail'
                }
            ],
            toolbar: "styleselect | bold italic blockquote | bullist numlist table| link image | code | preview visualblocks"
        };
    {% endblock %}
    var django_wysiwyg = {
        editors: {},
        enable: function django_wysiwyg_enable(editor_name, field_id, config) {
            if (!this.editors[editor_name]) {
                if (!config) {
                    config = django_wysiwyg_editor_configs[field_id] || django_wysiwyg_editor_config;
                }
                // Apply extra settings in local copy.
                var localconfig = {};
                tinyMCE.extend(localconfig, config);
                tinyMCE.extend(localconfig, {
                    mode: "exact",
                    elements: field_id,
                    setup: function (editor) {
                        django_wysiwyg.editors[editor_name] = editor;
                    }
                });
                tinyMCE.init(localconfig);
            }
        },
        disable: function django_wysiwyg_disable(editor_name) {
            var editor = this.editors[editor_name];
            if (editor) {
                editor.save();
                editor.remove();
                this.editors[editor_name] = null;
            }
        },
        is_loaded: function django_wysiwyg_is_loaded() {
            return window.tinyMCE != null;
        }
    }
</script>
